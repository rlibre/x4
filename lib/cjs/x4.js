"use strict";var qe=Object.defineProperty;var eo=Object.getOwnPropertyDescriptor;var No=Object.getOwnPropertyNames;var Uo=Object.prototype.hasOwnProperty;var to=s=>{throw TypeError(s)};var i=(s,e)=>qe(s,"name",{value:e,configurable:!0});var Vo=(s,e)=>{for(var t in e)qe(s,t,{get:e[t],enumerable:!0})},Ko=(s,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of No(e))!Uo.call(s,n)&&n!==t&&qe(s,n,{get:()=>e[n],enumerable:!(o=eo(e,n))||o.enumerable});return s};var qo=s=>Ko(qe({},"__esModule",{value:!0}),s),h=(s,e,t,o)=>{for(var n=o>1?void 0:o?eo(e,t):e,r=s.length-1,a;r>=0;r--)(a=s[r])&&(n=(o?a(e,t,n):a(n))||n);return o&&n&&qe(e,t,n),n};var oo=(s,e,t)=>e.has(s)||to("Cannot "+t);var T=(s,e,t)=>(oo(s,e,"read from private field"),t?t.call(s):e.get(s)),Qe=(s,e,t)=>e.has(s)?to("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),We=(s,e,t,o)=>(oo(s,e,"write to private field"),o?o.call(s,t):e.set(s,t),t);var Fn={};Vo(Fn,{Box:()=>y,Breadcrumbs:()=>me,BtnGroup:()=>q,Button:()=>v,CSizer:()=>C,Calendar:()=>xe,Checkbox:()=>be,Color:()=>L,ColorInput:()=>$,ColorPicker:()=>ve,Combobox:()=>we,Component:()=>l,ComputedStyle:()=>Pt,CoreElement:()=>Ze,Dialog:()=>G,EventSource:()=>ae,Flex:()=>ce,Form:()=>z,GridBox:()=>he,HBox:()=>u,Header:()=>ye,Icon:()=>f,Image:()=>Ee,Input:()=>k,Label:()=>x,Link:()=>ke,Listbox:()=>W,Menu:()=>H,MessageBox:()=>ee,Notification:()=>Ce,Panel:()=>Ae,Popup:()=>I,Progress:()=>Ie,Rating:()=>Pe,Rect:()=>N,Router:()=>Ft,Saturation:()=>X,ScrollView:()=>Q,Slider:()=>Me,StackBox:()=>K,Stylesheet:()=>It,SvgBuilder:()=>Vt,SvgComponent:()=>Kt,SvgGradient:()=>pt,SvgGroup:()=>tt,SvgPath:()=>ct,SvgShape:()=>et,SvgText:()=>dt,Switch:()=>De,Tabs:()=>Se,TextArea:()=>Re,TextEdit:()=>Oe,Timer:()=>ie,Treeview:()=>Be,UnsafeHtml:()=>re,VBox:()=>_,Viewport:()=>J,_date_set_locale:()=>tn,_tr:()=>b,addEvent:()=>Xe,addTranslation:()=>vt,asap:()=>wt,beep:()=>cn,calcAge:()=>ln,camelCase:()=>Jo,clamp:()=>S,class_ns:()=>d,componentFromDOM:()=>E,createLanguage:()=>gt,date_calc_weeknum:()=>_t,date_clone:()=>se,date_diff:()=>nn,date_format:()=>on,date_hash:()=>Y,date_sql_utc:()=>sn,date_to_sql:()=>rn,dispatchEvent:()=>lo,dragManager:()=>gn,formatIntlDate:()=>U,getAvailableLanguages:()=>Yo,getCurrentLanguage:()=>Go,initTooltips:()=>On,isArray:()=>at,isFeatureAvailable:()=>Ye,isFunction:()=>$o,isLanguage:()=>ft,isNumber:()=>V,isString:()=>M,isUnitLess:()=>Mt,kbNav:()=>Jt,kbTreeNav:()=>Ro,makeUniqueComponentId:()=>R,pad:()=>F,parseIntlDate:()=>an,pascalCase:()=>Xo,selectLanguage:()=>so,sprintf:()=>st,svgLoader:()=>mt,unbubbleEvents:()=>ao,unitless:()=>$e,unsafeHtml:()=>Ge,wrapDOM:()=>St,x4_class_ns_sym:()=>je});module.exports=qo(Fn);var no=Symbol("i18n"),He={};function gt(s,e){He[s]={name:s,base:e,src_translations:{},translations:{}}}i(gt,"createLanguage");function ft(s){return He[s]!==void 0}i(ft,"isLanguage");function vt(s,...e){if(!ft(s))return;let t=He[s];e.forEach(o=>{ro(t.src_translations,o)}),t.translations=io(t.src_translations,t.base,!0)}i(vt,"addTranslation");function ro(s,e){for(let t in e){let o=e[t];typeof o=="string"?s[t]=o:Array.isArray(o)&&(!s[t]||!Array.isArray(s[t]))?s[t]=[...o]:!s[t]||typeof s[t]!="object"?s[t]={...o}:ro(s[t],e[t])}}i(ro,"_patch");function io(s,e,t){let o={};for(let n in s)typeof s[n]!="string"&&!Array.isArray(s[n])?o[n]=io(s[n],e,!1):o[n]=s[n];return Qo(o,e,t)}i(io,"_proxyfy");function Qo(s,e,t){return new Proxy(s,{get:i((o,n)=>{t?it=[n]:it.push(n);let r=o[n];return r===void 0&&(e&&(r=Wo(e)),r===void 0&&console.error("I18N error: unable to find","_tr."+it.join("."))),r},"get")})}i(Qo,"_mk_proxy");var it;function Wo(s){for(;s;){let e=He[s],t=e.translations,o;for(let n of it){if(o=t[n],o===void 0)break;t=o}if(o!==void 0)return t;s=e.base}}i(Wo,"_findBaseTrans");var b={};function so(s){if(ft(s))return b=He[s].translations,b[no]=s,b}i(so,"selectLanguage");function Go(){return b[no]}i(Go,"getCurrentLanguage");function Yo(){return Object.keys(He)}i(Yo,"getAvailableLanguages");var jo={global:{ok:"OK",cancel:"Annuler",ignore:"Ignorer",yes:"Oui",no:"Non",abort:"Abandonner",retry:"Réessayer",error:"Erreur",today:"Aujourd'hui",open:"Ouvrir",new:"Nouveau",delete:"Supprimer",close:"Fermer",save:"Enregistrer",search:"Rechercher",search_tip:"Saisissez le texte à rechercher. <b>Enter</b> pour lancer la recherche. <b>Esc</b> pour annuler.",required_field:"information requise",invalid_format:"format invalide",invalid_email:"adresse mail invalide",invalid_number:"valeur numérique invalide",diff_date_seconds:"{0} secondes",diff_date_minutes:"{0} minutes",diff_date_hours:"{0} heures",invalid_date:"Date non reconnue ({0})",empty_list:"Liste vide",date_input_formats:"d/m/y|d.m.y|d m y|d-m-y|dmy",date_format:"D/M/Y",day_short:["dim","lun","mar","mer","jeu","ven","sam"],day_long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],month_short:["jan","fév","mar","avr","mai","jun","jui","aoû","sep","oct","nov","déc"],month_long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],property:"Propriété",value:"Valeur",err_403:"Vous n'avez pas les droits suffisants pour effectuer cette action",copy:"Copier",cut:"Couper",paste:"Coller"}},Zo={global:{ok:"OK",cancel:"Cancel",ignore:"Ignore",yes:"Yes",no:"No",abort:"Abort",retry:"Retry",error:"Error",today:"Today",open:"Open",new:"New",delete:"Delete",close:"Close",save:"Save",search:"Search",search_tip:"Type in the text to search. <b>Enter</b> to start the search. <b>Esc</b> to cancel.",required_field:"missing information",invalid_format:"invalid format",invalid_email:"invalid email address",invalid_number:"bad numeric value",diff_date_seconds:"{0} seconds",diff_date_minutes:"{0} minutes",diff_date_hours:"{0} hours",invalid_date:"Unrecognized date({0})",empty_list:"Empty list",date_input_formats:"m/d/y|m.d.y|m d y|m-d-y|mdy",date_format:"M/D/Y",day_short:["sun","mon","tue","wed","thu","fri","sat"],day_long:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],month_short:["jan","feb","mar","apr","may","jun","jui","aug","sep","oct","nov","dec"],month_long:["january","february","march","april","mau","june","jully","august","september","october","november","december"],property:"Property",value:"Value",err_403:"You do not have sufficient rights to do that action",copy:"Copy",cut:"Cut",paste:"Paste"}};gt("fr",null);vt("fr",jo);gt("en","fr");vt("en",Zo);so("fr");function M(s){return typeof s=="string"}i(M,"isString");function V(s){return typeof s=="number"&&isFinite(s)}i(V,"isNumber");function at(s){return s instanceof Array}i(at,"isArray");function $o(s){return s instanceof Function}i($o,"isFunction");var yt=class yt extends String{constructor(e){super(e)}};i(yt,"UnsafeHtml");var re=yt;function Ge(s){return new re(s)}i(Ge,"unsafeHtml");function S(s,e,t){return s<e?e:s>t?t:s}i(S,"clamp");var Et=class Et{constructor(e,t,o,n){e!==void 0&&(V(e)?(this.left=e,this.top=t,this.width=o,this.height=n):Object.assign(this,e))}get right(){return this.left+this.width}get bottom(){return this.top+this.height}};i(Et,"Rect");var N=Et;function Ye(s){switch(s){case"eyedropper":return"EyeDropper"in window}return!1}i(Ye,"isFeatureAvailable");var kt=class kt{setTimeout(e,t,o){this._timers?this.clearTimeout(e):this._timers=new Map;let n=setTimeout(o,t);return this._timers.set(e,n),n}clearTimeout(e){this._timers&&this._timers.has(e)&&(clearTimeout(this._timers.get(e)),this._timers.delete(e))}setInterval(e,t,o){this._timers?this.clearInterval(e):this._timers=new Map;let n=setInterval(o,t);return this._timers.set(e,n),n}clearInterval(e){this._timers&&this._timers.has(e)&&(clearInterval(this._timers.get(e)),this._timers.delete(e))}clearAllTimeouts(){var e;(e=this._timers)==null||e.forEach(t=>{clearTimeout(t)}),this._timers=null}};i(kt,"Timer");var ie=kt;function wt(s){return requestAnimationFrame(s)}i(wt,"asap");function F(s,e,t="0"){let o;return M(s)?o=s:o=""+s,e>0?o.padEnd(e,t):o.padStart(-e,t)}i(F,"pad");function st(s,...e){return s.replace(/{(\d+)}/g,function(t,o){return typeof e[o]<"u"?e[o]:t})}i(st,"sprintf");function Xo(s){let e=s;return e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e=e.toLowerCase(),e=e.replace(/[^- a-z0-9]+/g," "),e.indexOf(" ")<0?e:(e=e.trim(),e.replace(/ /g,"-"))}i(Xo,"pascalCase");function Jo(s){let e=s.toLowerCase();return e=e.replace(/[^a-zA-Z0-9]+(.)/g,(t,o)=>o.toUpperCase()),e}i(Jo,"camelCase");var en="fr-FR";function tn(s){en=s}i(tn,"_date_set_locale");function on(s,e){return U(s)}i(on,"date_format");function nn(s,e,t){var o=(s.getTime()-e.getTime())/1e3;let n=o;if(n<60)return st(b.global.diff_date_seconds,Math.round(n));let r=Math.floor(n/60);if(r<60)return st(b.global.diff_date_minutes,Math.round(r));let a=Math.floor(r/60);return st(b.global.diff_date_hours,a,r%60)}i(nn,"date_diff");function rn(s,e){return e?U(s,"Y-M-D H:I:S"):U(s,"Y-M-D")}i(rn,"date_to_sql");function sn(s){return new Date(s+" GMT")}i(sn,"date_sql_utc");function Y(s){return s.getFullYear()<<16|s.getMonth()<<8|s.getDate()}i(Y,"date_hash");function se(s){return new Date(s.getTime())}i(se,"date_clone");function _t(s){let e=new Date(s.getFullYear(),0,1),t=(s.valueOf()-e.valueOf())/864e5;return Math.floor((t+e.getDay()+1)/7)}i(_t,"date_calc_weeknum");function an(s,e=b.global.date_input_formats){var o,n,r,a,c,p;let t=e.split("|");for(let m of t){let g="";for(let w of m)w=="d"||w=="D"?g+="(?<day>\\d{1,2})":w=="m"||w=="M"?g+="(?<month>\\d{1,2})":w=="y"||w=="Y"?g+="(?<year>\\d{1,4})":w=="h"||w=="H"?g+="(?<hour>\\d{1,2})":w=="i"||w=="I"?g+="(?<min>\\d{1,2})":w=="s"||w=="S"?g+="(?<sec>\\d{1,2})":w==" "?g+="\\s+":g+="\\s*\\"+w+"\\s*";let A=new RegExp("^"+g+"$","m").exec(s);if(A){let w=new Date,Ke=parseInt((o=A.groups.day)!=null?o:"1"),oe=parseInt((n=A.groups.month)!=null?n:"1"),ne=parseInt((r=A.groups.year)!=null?r:w.getFullYear()+""),nt=parseInt((a=A.groups.hour)!=null?a:"0"),Oo=parseInt((c=A.groups.min)!=null?c:"0"),zo=parseInt((p=A.groups.sec)!=null?p:"0");ne>0&&ne<100&&(ne+=2e3);let rt=new Date(ne,oe-1,Ke,nt,Oo,zo,0),Bo=rt.getFullYear(),Ho=rt.getMonth()+1,Fo=rt.getDate();return Bo!=ne||Ho!=oe||Fo!=Ke?null:rt}}return null}i(an,"parseIntlDate");function U(s,e=b.global.date_format){if(!s)return"";let t={year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),wday:s.getDay(),hours:s.getHours(),minutes:s.getMinutes(),seconds:s.getSeconds(),milli:s.getMilliseconds()},o="",n=0;for(let r of e){if(r=="{"){if(++n==1)continue}else if(r=="}"&&--n==0)continue;if(n){o+=r;continue}r=="d"?o+=t.day:r=="D"?o+=F(t.day,-2):r=="j"?o+=b.global.day_short[t.wday]:r=="J"?o+=b.global.day_long[t.wday]:r=="w"?o+=_t(s):r=="W"?o+=F(_t(s),-2):r=="m"?o+=t.month:r=="M"?o+=F(t.month,-2):r=="o"?o+=b.global.month_short[t.month-1]:r=="O"?o+=b.global.month_long[t.month-1]:r=="y"||r=="Y"?o+=F(t.year,-4):r=="a"||r=="A"?o+=t.hours<12?"am":"pm":r=="h"?o+=t.hours:r=="H"?o+=F(t.hours,-2):r=="i"?o+=t.minutes:r=="I"?o+=F(t.minutes,-2):r=="s"?o+=t.seconds:r=="S"?o+=F(t.seconds,-2):r=="l"?o+=t.milli:r=="L"?o+=F(t.milli,-3):o+=r}return o}i(U,"formatIntlDate");function ln(s,e){if(e===void 0&&(e=new Date),!s)return 0;let t=e.getFullYear()-s.getFullYear();return(e.getMonth()<s.getMonth()||e.getMonth()==s.getMonth()&&e.getDate()<s.getDate())&&t--,t}i(ln,"calcAge");function cn(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}i(cn,"beep");var je=Symbol("class-ns");function d(s){return function(e){e[je]=s}}i(d,"class_ns");var dn=i(function(){this.propagationStopped=!0},"stopPropagation"),pn=i(function(){this.defaultPrevented=!0},"preventDefault"),Ct=class Ct{constructor(e=null){this._source=e!=null?e:this}addListener(e,t,o=!1){this._registry||(this._registry=new Map);let n=this._registry.get(e);n||(n=[],this._registry.set(e,n));let r=t;n.indexOf(r)==-1&&(o?n.unshift(r):n.push(r))}fire(e,t){var n;let o=(n=this._registry)==null?void 0:n.get(e);if(o&&o.length){let r=t;if(r||(r={}),r.source||(r.source=this._source),r.type||(r.type=e),r.preventDefault||(r.preventDefault=pn),r.stopPropagation||(r.stopPropagation=dn),o.length==1)o[0](r);else{let a=o.slice();for(let c=0,p=a.length;c<p&&(a[c](r),!r.propagationStopped);c++);}}}};i(Ct,"EventSource");var ae=Ct;var j,B,At=class At{constructor(){Qe(this,j);Qe(this,B)}__startTimer(e,t,o,n){T(this,B)?this.__stopTimer(e):We(this,B,new Map);let r=(o?setInterval:setTimeout)(n,t);T(this,B).set(e,()=>{(o?clearInterval:clearTimeout)(r),T(this,B).delete(e)})}__stopTimer(e){let t=T(this,B).get(e);t&&t()}setTimeout(e,t,o){this.__startTimer(e,t,!1,o)}clearTimeout(e){this.__stopTimer(e)}setInterval(e,t,o){this.__startTimer(e,t,!0,o)}clearInterval(e){this.__stopTimer(e)}clearTimeouts(){for(let[e,t]of T(this,B))t();T(this,B).clear()}on(e,t){console.assert(t!=null),T(this,j)||We(this,j,new ae(this)),T(this,j).addListener(e,t)}fire(e,t){T(this,j)&&T(this,j).fire(e,t)}};j=new WeakMap,B=new WeakMap,i(At,"CoreElement");var Ze=At;var $e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Mt(s){return!!$e[s]}i(Mt,"isUnitLess");var le=class le{constructor(){this.m_rules=new Map;function e(t){for(let o=0;o<document.styleSheets.length;o++){let n=document.styleSheets[o];if(n.title===t)return n}}if(i(e,"getStyleSheet"),this.m_sheet=e("x4-dynamic-css"),!this.m_sheet){let t=document.createElement("style");t.setAttribute("id","x4-dynamic-css"),document.head.appendChild(t),this.m_sheet=t.sheet}}setRule(e,t){if(M(t)){let o=this.m_rules.get(e);o!==void 0?this.m_sheet.deleteRule(o):o=this.m_sheet.cssRules.length,this.m_rules.set(e,this.m_sheet.insertRule(t,o))}else{let o=1;for(let n in t){let r=n+" { ",a=t[n];for(let c in a){let p=a[c];for(let m=0;m<p.length;m++)r+=c+": "+p[m]+"; "}r+="}",this.setRule(e+"--"+o,r),o++}}}static getVar(e){return le.doc_style||(le.doc_style=getComputedStyle(document.documentElement)),e.startsWith("--")||(e="--"+e),le.doc_style.getPropertyValue(e)}};i(le,"Stylesheet"),le.guid=1;var It=le,Dt=class Dt{constructor(e){this.m_style=e}value(e){return this.m_style[e]}parse(e){return parseInt(this.m_style[e])}get style(){return this.m_style}};i(Dt,"ComputedStyle");var Pt=Dt;var ao={mouseleave:1,mouseenter:1,load:1,unload:1,scroll:1,focus:1,blur:1,rowexit:1,beforeunload:1,stop:1,dragdrop:1,dragenter:1,dragexit:1,draggesture:1,dragover:1,contextmenu:1,created:2,removed:2,sizechange:2},lt=new WeakMap,Tt=null,hn=i((s,e)=>{let t=i((n,r)=>{let a=lt.get(n);a&&a[r]&&n.dispatchEvent(new Event(r,{}))},"sendEvent"),o=i((n,r)=>{r&&t(n,"created");for(let a=n.firstChild;a;a=a.nextSibling)o(a,r);r||t(n,"removed")},"notify");for(let n of s)n.type=="childList"&&(n.addedNodes&&n.addedNodes.forEach(r=>{o(r,!0)}),n.removedNodes&&n.removedNodes.forEach(r=>{o(r,!1)}))},"observeMutation"),Lt=null;function mn(s){s.forEach(e=>{let t=e.target;t.offsetParent!==null&&t.dispatchEvent(new Event("resized"))})}i(mn,"observeSize");function lo(s){let e=s.target,t=ao[s.type]===2;for(;e;){let o=lt.get(e);if(o){let n=o[s.type];if(n&&(Array.isArray(n)?n.some(r=>r(s)):n(s),s.stopPropagation||s.defaultPrevented||t))break}if(e=e.parentNode,e==document)break}}i(lo,"dispatchEvent");function Xe(s,e,t,o=!1){e=="removed"||e=="created"?Tt||(Tt=new MutationObserver(hn),Tt.observe(document.body,{childList:!0,subtree:!0})):e=="resized"&&(Lt||(Lt=new ResizeObserver(mn)),Lt.observe(s));let n=lt.get(s);if(n||(n={},lt.set(s,n)),!n[e])n[e]=t,s.addEventListener(e,lo);else{let r=n[e];Array.isArray(r)?r.push(t):n[e]=[r,t]}}i(Xe,"addEvent");var co=Symbol("fragment"),po=Symbol("component"),un=/^-?\d+(\.\d*)?$/;function xn(s){let e=[],t=Object.getPrototypeOf(s);if(t.constructor==l)return["x4component"];for(;t&&t.constructor!==l;){let o=t.constructor.name,n=t.constructor.hasOwnProperty(je)?t.constructor[je]:"";e.push(n+o.toLowerCase()),t=Object.getPrototypeOf(t)}return e}i(xn,"genClassNames");var bn=1e3,R=i(()=>`x4-${bn++}`,"makeUniqueComponentId"),l=class extends Ze{constructor(e){var t,o;if(super(),this.props=e,e.existingDOM)this.dom=e.existingDOM;else{e.ns?this.dom=document.createElementNS(e.ns,(t=e.tag)!=null?t:"div"):this.dom=document.createElement((o=e.tag)!=null?o:"div"),e.attrs&&this.setAttributes(e.attrs),e.cls&&this.addClass(e.cls),e.hidden&&this.show(!1),e.id!==void 0&&this.setAttribute("id",e.id),e.width!==void 0&&this.setStyleValue("width",e.width),e.height!==void 0&&this.setStyleValue("height",e.height),e.tooltip&&this.setAttribute("tooltip",e.tooltip),e.style&&this.setStyle(e.style),e.content&&this.setContent(e.content),e.dom_events&&this.setDOMEvents(e.dom_events);let n=xn(this);this.dom.classList.add(...n),e.disabled&&this.addDOMEvent("created",()=>{this.enable(!1)})}this.dom[po]=this}hasClass(e){return this.dom.classList.contains(e)}addClass(e){if(e)if(e.indexOf(" ")>=0){let t=e.split(" ");this.dom.classList.add(...t)}else this.dom.classList.add(e)}removeClass(e){if(e)if(e.indexOf(" ")>=0){let t=e.split(" ");this.dom.classList.remove(...t)}else this.dom.classList.remove(e)}removeClassEx(e){Array.from(this.dom.classList).forEach(o=>{o.match(e)&&this.dom.classList.remove(o)})}toggleClass(e){if(!e)return;let t=i(o=>{this.dom.classList.toggle(o)},"toggle");e.indexOf(" ")>=0?e.split(" ").forEach(t):t(e)}setClass(e,t=!0){t?this.addClass(e):this.removeClass(e)}setAttributes(e){for(let t in e){let o=e[t];this.setAttribute(t,o)}}setAttribute(e,t){t==null?this.dom.removeAttribute(e):this.dom.setAttribute(e,""+t)}getAttribute(e){return this.dom.getAttribute(e)}getData(e){return this.getAttribute("data-"+e)}setData(e,t){return this.setAttribute("data-"+e,t)}setInternalData(e,t){return this.store||(this.store=new Map),this.store.set(e,t),this}getInternalData(e){var t;return(t=this.store)==null?void 0:t.get(e)}addDOMEvent(e,t,o=!1){Xe(this.dom,e,t,o)}setDOMEvents(e){for(let t in e)this.addDOMEvent(t,e[t])}mapPropEvents(e,...t){let o=e;t.forEach(n=>{o.hasOwnProperty(n)&&o[n]&&this.on(n,o[n])})}clearContent(){let e=this.dom;for(;e.firstChild;)e.removeChild(e.firstChild)}setContent(e){this.clearContent(),this.appendContent(e)}appendContent(e){let t=i((o,n)=>{if(n instanceof l)o.appendChild(n.dom);else if(n instanceof re)o.insertAdjacentHTML("beforeend",n.toString());else if(typeof n=="string"||typeof n=="number"){let r=document.createTextNode(n.toString());o.appendChild(r)}else n&&console.warn("Unknown type to append: ",n)},"set");if(!at(e))t(this.dom,e);else if(e.length<=8)for(let o of e)t(this.dom,o);else{let o=document.createDocumentFragment();for(let n of e)t(o,n);this.dom.appendChild(o)}}prependContent(e){let t=this.dom,o=i(n=>{if(n instanceof l)t.insertBefore(t.firstChild,n.dom);else if(n instanceof re)t.insertAdjacentHTML("beforebegin",n.toString());else if(typeof n=="string"||typeof n=="number"){let r=document.createTextNode(n.toString());t.insertBefore(t.firstChild,r)}else console.warn("Unknown type to append: ",n)},"set");if(!at(e))o(e);else{let n=document.createDocumentFragment();for(let r of e)o(r);t.insertBefore(t.firstChild,n)}}removeChild(e){this.dom.removeChild(e.dom)}queryAll(e){let t=this.dom.querySelectorAll(e),o=new Array(t.length);return t.forEach((n,r)=>o[r]=E(n)),o}query(e){let t=this.dom.querySelector(e);return E(t)}setAria(e,t){return this.setAttribute(e,t),this}setStyle(e){let t=this.dom.style;for(let o in e){let n=e[o];!$e[o]&&(V(n)||un.test(n))&&(n+="px"),t[o]=n}return this}setStyleValue(e,t){let o=this.dom.style;if(V(t)){let n=t+"";$e[e]||(n+="px"),o[e]=n}else o[e]=t;return this}getStyleValue(e){return this.dom.style[e]}setWidth(e){this.setStyleValue("width",V(e)?e+"px":e)}setHeight(e){this.setStyleValue("height",V(e)?e+"px":e)}setStyleVariable(e,t){this.dom.style.setProperty(e,t)}getStyleVariable(e){return this.getComputedStyle().getPropertyValue(e)}getComputedStyle(){return getComputedStyle(this.dom)}setCapture(e){this.dom.setPointerCapture(e)}releaseCapture(e){this.dom.releasePointerCapture(e)}getBoundingRect(){let e=this.dom.getBoundingClientRect();return new N(e.x,e.y,e.width,e.height)}focus(){this.dom.focus()}scrollIntoView(e){this.dom.scrollIntoView(e)}isVisible(){return this.dom.offsetParent!==null}show(e=!0){this.setClass("x4hidden",!e)}hide(){this.show(!1)}enable(e=!0){this.setAttribute("disabled",!e),this.enumChildNodes(!0).forEach(o=>{o instanceof HTMLInputElement&&(o.disabled=!e)})}disable(){this.enable(!1)}isDisabled(){return this.getAttribute("disabled")}nextElement(){let e=this.dom.nextElementSibling;return E(e)}prevElement(){let e=this.dom.previousElementSibling;return E(e)}parentElement(e){let t=this.dom;for(;t.parentElement;){let o=E(t.parentElement);if(!e||o&&o instanceof e)return o;t=t.parentElement}return null}firstChild(){let e=this.dom.firstElementChild;return E(e)}lastChild(){let e=this.dom.lastElementChild;return E(e)}enumChildComponents(e){let t=[];return this.enumChildNodes(e).forEach(n=>{let r=E(n);r&&t.push(r)}),t}enumChildNodes(e){return Array.from(e?this.dom.querySelectorAll("*"):this.dom.children)}animate(e,t){this.dom.animate(e,t)}static createElement(e,t,...o){let n;return e==this.createFragment||e===co?o:(e instanceof Function?(t=t!=null?t:{},!t.children&&o&&o.length&&(t.content=o),n=new e(t!=null?t:{})):n=new l({tag:e,content:o,...t}),o&&o.length,n)}static createFragment(){return this.createElement(co,null)}queryInterface(e){return null}};i(l,"Component"),l=h([d("x4")],l);function E(s){return s?s[po]:null}i(E,"componentFromDOM");function St(s){let e=E(s);return e||new l({existingDOM:s})}i(St,"wrapDOM");var Rt=class Rt extends l{constructor(){super({})}};i(Rt,"Flex");var ce=Rt;function de(s){return s.toString(16).padStart(2,"0")}i(de,"hx");function Fe(s){return Math.round(s)}i(Fe,"round");var Ot=class Ot{constructor(...e){this.rgb=[0,0,0,1];this.invalid=!1;M(e[0])?this.setValue(e[0]):this.setRgb(e[0],e[1],e[2],e[3])}setValue(e){if(this.invalid=!1,e.length==4&&/#[0-9a-fA-F]{3}/.test(e)){let t=parseInt(e[1],16),o=parseInt(e[2],16),n=parseInt(e[3],16);return this.setRgb(t<<4|t,o<<4|o,n<<4|n,1)}if(e.length==7&&/#[0-9a-fA-F]{6}/.test(e)){let t=parseInt(e[1],16),o=parseInt(e[2],16),n=parseInt(e[3],16),r=parseInt(e[4],16),a=parseInt(e[5],16),c=parseInt(e[6],16);return this.setRgb(t<<4|o,n<<4|r,a<<4|c,1)}if(e.length==9&&/#[0-9a-fA-F]{8}/.test(e)){let t=parseInt(e[1],16),o=parseInt(e[2],16),n=parseInt(e[3],16),r=parseInt(e[4],16),a=parseInt(e[5],16),c=parseInt(e[6],16),p=parseInt(e[7],16),m=parseInt(e[8],16);return this.setRgb(t<<4|o,n<<4|r,a<<4|c,(p<<4|m)/255)}if(e.startsWith("rgba")){let o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*((\d+)|(\d*\.\d+)|(\.\d+))\s*\)/.exec(e);if(o)return this.setRgb(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),parseFloat(o[4]))}else if(e.startsWith("rgb")){let o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(o)return this.setRgb(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),1)}else if(e.startsWith("var")){let o=/var\s*\(([^)]*)\)/.exec(e);if(o){let n=o[1].trim(),a=getComputedStyle(document.documentElement).getPropertyValue(n);return this.setValue(a)}}return this.invalid=!0,this.setRgb(255,0,0,1)}setHsv(e,t,o,n=1){let r=Math.min(5,Math.floor(e*6)),a=e*6-r,c=o*(1-t),p=o*(1-a*t),m=o*(1-(1-a)*t),g,P,A;switch(r){case 0:g=o,P=m,A=c;break;case 1:g=p,P=o,A=c;break;case 2:g=c,P=o,A=m;break;case 3:g=c,P=p,A=o;break;case 4:g=m,P=c,A=o;break;case 5:g=o,P=c,A=p;break}return this.setRgb(g*255,P*255,A*255,n)}setRgb(e,t,o,n){return this.rgb=[S(e,0,255),S(t,0,255),S(o,0,255),S(n,0,1)],this}toRgbString(e){let t=this.rgb;return e===!1||t[3]==1?`rgb(${Fe(t[0])},${Fe(t[1])},${Fe(t[2])})`:`rgba(${Fe(t[0])},${Fe(t[1])},${Fe(t[2])},${t[3].toFixed(3)})`}toHexString(){let e=this.rgb;return e[3]==1?`#(${de(e[0])},${de(e[1])},${de(e[2])})`:`rgba(${de(e[0])},${de(e[1])},${de(e[2])},${de(e[3]*255)})`}toRgb(){let e=this.rgb;return{red:e[0],green:e[1],blue:e[2],alpha:e[3]}}toHsv(){let e=this.toRgb();e.red/=255,e.green/=255,e.blue/=255;let t=Math.max(e.red,e.green,e.blue),o=Math.min(e.red,e.green,e.blue),n=t-o,r=t===0?0:n/t,a=t,c;if(n===0)c=0;else switch(t){case e.red:c=(e.green-e.blue)/n/6+(e.green<e.blue?1:0);break;case e.green:c=(e.blue-e.red)/n/6+1/3;break;case e.blue:c=(e.red-e.green)/n/6+2/3;break}return{hue:c,saturation:r,value:a,alpha:e.alpha}}getAlpha(){return this.rgb[3]}setAlpha(e){return this.rgb[3]=S(e,0,1),this}isInvalid(){return this.invalid}};i(Ot,"Color");var L=Ot;var zt=Symbol("x-drag-cb"),Ht=class Ht{registerDraggableElement(e){e.addDOMEvent("dragstart",t=>{this.dragSource=e,this.dragGhost=e.dom.cloneNode(!0),this.dragGhost.classList.add("dragged"),document.body.appendChild(this.dragGhost),e.addClass("dragging"),t.dataTransfer.setData("text/string","1"),t.dataTransfer.setDragImage(new Image,0,0),t.stopPropagation()}),e.addDOMEvent("drag",t=>{this.dragGhost.style.left=t.pageX+"px",this.dragGhost.style.top=t.pageY+"px"}),e.addDOMEvent("dragend",t=>{e.removeClass("dragging"),this.dragGhost.remove()}),e.setAttribute("draggable","true")}registerDropTarget(e,t,o){let n=i(p=>{if(o&&!o(this.dragSource)){console.log("reject ",e),p.dataTransfer.dropEffect="none";return}console.log("accepted ",e),p.preventDefault(),p.dataTransfer.dropEffect="copy"},"dragEnter"),r=i(p=>{if(o&&!o(this.dragSource)){console.log("reject ",e),p.dataTransfer.dropEffect="none";return}if(p.preventDefault(),this.dropTarget!=e&&(this.dropTarget=e,this._startCheck()),this.dropTarget){let m={pt:{x:p.pageX,y:p.pageY},data:p.dataTransfer};t("drag",this.dragSource,m)}p.dataTransfer.dropEffect="copy"},"dragOver"),a=i(p=>{this.dropTarget=null,p.preventDefault()},"dragLeave"),c=i(p=>{let m={pt:{x:p.pageX,y:p.pageY},data:p.dataTransfer};t("drop",this.dragSource,m),this.dropTarget=null,e.removeClass("drop-over"),p.preventDefault()},"drop");e.addDOMEvent("dragenter",n),e.addDOMEvent("dragover",r),e.addDOMEvent("dragleave",a),e.addDOMEvent("drop",c),e.setInternalData(zt,t)}_startCheck(){this.timer&&(clearInterval(this.timer),this._check()),this.timer=setInterval(()=>this._check(),300)}_check(){let e=i(o=>{o.removeClass("drop-over"),o.getInternalData(zt)("leave",this.dragSource)},"leaving"),t=i(o=>{o.addClass("drop-over"),o.getInternalData(zt)("enter",this.dragSource)},"entering");this.dropTarget?(!this.notified||this.notified!=this.dropTarget)&&(this.notified&&e(this.notified),this.notified=this.dropTarget,t(this.notified)):this.notified&&(e(this.notified),this.notified=null,clearInterval(this.timer))}};i(Ht,"DragManager");var Bt=Ht,gn=new Bt;function fn(s,e=!1){if(s instanceof RegExp)return{keys:null,pattern:s};let t=s.split("/"),o=[],n="";t[0]==""&&t.shift();for(let r of t){let a=r[0];if(a==="*")o.push("wild"),n+="/(.*)";else if(a===":"){let c=r.indexOf("?",1),p=r.indexOf(".",1);o.push(r.substring(1,c>=0?c:p>=0?p:r.length)),n+=c>=0&&p<0?"(?:/([^/]+?))?":"/([^/]+?)",p>=0&&(n+=(c>=0?"?":"")+"\\"+r.substring(p))}else n+="/"+r}return{keys:o,pattern:new RegExp(`^${n}${e?"(?=$|/)":"/?$"}`,"i")}}i(fn,"parseRoute");var Nt=class Nt extends ae{constructor(e=!0){super(),this.m_routes=[],this.m_useHash=e,window.addEventListener("popstate",t=>{let o=this._getLocation(),n=this._find(o);n.handlers.forEach(r=>{r(n.params,o)})})}get(e,t){let{keys:o,pattern:n}=fn(e);this.m_routes.push({keys:o,pattern:n,handler:t})}init(){this.navigate(this._getLocation())}_getLocation(){return this.m_useHash?"/"+document.location.hash.substring(1):document.location.pathname}navigate(e,t=!0,o=!1){e.startsWith("/")||(e="/"+e);let n=this._find(e);if(!n||n.handlers.length==0){console.log("route not found: "+e),this.fire("error",{code:404,message:"route not found"});return}if(this.m_useHash){for(;e.at(0)=="/";)e=e.substring(1);e="#"+e}o?window.history.replaceState({},"",e):window.history.pushState({},"",e),t&&n.handlers.forEach(r=>{r(n.params,e)})}_find(e){let t=[],o={},n=[];for(let r of this.m_routes)if(r.keys)if(r.keys.length>0){if(t=r.pattern.exec(e),t===null)continue;for(let a=0;a<r.keys.length;)o[r.keys[a]]=t[++a];n=[...n,r.handler]}else r.pattern.test(e)&&(n=[...n,r.handler]);else{if(t=r.pattern.exec(e),!t)continue;if(t.groups)for(let a in t.groups)o[a]=t.groups[a];n=[...n,r.handler]}return{params:o,handlers:n}}};i(Nt,"Router");var Ft=Nt;var ho="http://www.w3.org/2000/svg";function vn(s){return s*Math.PI/180}i(vn,"d2r");function mo(s,e,t,o){let n=vn(o);return{x:s+t*Math.cos(n),y:e+t*Math.sin(n)}}i(mo,"p2c");function D(s){return Math.round(s*1e3)/1e3}i(D,"num");function Ut(s,...e){return e=e.map(t=>typeof t=="number"&&isFinite(t)?D(t):t),String.raw(s,...e)}i(Ut,"clean");var qt=class qt{constructor(e){this._dom=document.createElementNS("http://www.w3.org/2000/svg",e)}getDom(){return this._dom}stroke(e,t){return this.setAttr("stroke",e),t!==void 0&&this.setAttr("stroke-width",t+"px"),this}strokeWidth(e){return this.setAttr("stroke-width",e+"px"),this}strokeCap(e){return this.setAttr("stroke-linecap",e)}strokeOpacity(e){return this.setAttr("stroke-opacity",e+"")}antiAlias(e){return this.setAttr("shape-rendering",e?"auto":"crispEdges")}fill(e){return this.setAttr("fill",e),this}no_fill(){return this.setAttr("fill","transparent"),this}setAttr(e,t){return this._dom.setAttribute(e,t),this}setStyle(e,t){let o=this._dom.style;if(V(t)){let n=t+"";Mt(e)||(n+="px"),o[e]=n}else o[e]=t;return this}addClass(e){if(e)if(e.indexOf(" ")>=0){let t=e.split(" ");this._dom.classList.add(...t)}else this._dom.classList.add(e)}clip(e){return this.setAttr("clip-path",`url(#${e})`),this}transform(e){return this.setAttr("transform",e),this}rotate(e,t,o){return this.transform(`rotate( ${e} ${t} ${o} )`),this}translate(e,t){return this.transform(`translate( ${e} ${t} )`),this}scale(e){return this.transform(`scale( ${e} )`),this}addDOMEvent(e,t,o=!1){return Xe(this._dom,e,t,o),this}};i(qt,"SvgItem");var pe=qt,Qt=class Qt extends pe{constructor(){super("path"),this._path=""}_update(){return this.setAttr("d",this._path),this}moveTo(e,t){return this._path+=Ut`M${e},${t}`,this._update()}lineTo(e,t){return this._path+=Ut`L${e},${t}`,this._update()}closePath(){return this._path+="Z",this._update()}arc(e,t,o,n,r){let a=mo(e,t,o,n-90),c=mo(e,t,o,r-90),p=r-n<=180?"0":"1";return this._path+=Ut`M${a.x},${a.y}A${o},${o} 0 ${p} 1 ${c.x},${c.y}`,this._update()}};i(Qt,"SvgPath");var ct=Qt,Wt=class Wt extends pe{constructor(e,t,o){super("text"),this.setAttr("x",D(e)+""),this.setAttr("y",D(t)+""),this._dom.innerHTML=o}font(e){return this.setAttr("font-family",e)}fontSize(e){return this.setAttr("font-size",e+"")}fontWeight(e){return this.setAttr("font-weight",e)}textAlign(e){let t;switch(e){case"left":t="start";break;case"center":t="middle";break;case"right":t="end";break;default:return this}return this.setAttr("text-anchor",t)}verticalAlign(e){let t;switch(e){case"top":t="hanging";break;case"center":t="middle";break;case"bottom":t="baseline";break;case"baseline":t="mathematical";break;default:return}return this.setAttr("alignment-baseline",t)}};i(Wt,"SvgText");var dt=Wt,Gt=class Gt extends pe{constructor(e){super(e)}};i(Gt,"SvgShape");var et=Gt,Ne=class Ne extends pe{constructor(e,t,o,n){super("linearGradient"),this._id="gx-"+Ne.g_id,Ne.g_id++,this.setAttr("id",this._id),this.setAttr("x1",M(e)?e:D(e)+""),this.setAttr("x2",M(o)?o:D(o)+""),this.setAttr("y1",M(t)?t:D(t)+""),this.setAttr("y2",M(n)?n:D(n)+""),this._stops=[]}get id(){return"url(#"+this._id+")"}addStop(e,t){return this._dom.insertAdjacentHTML("beforeend",`<stop offset="${e}%" stop-color="${t}"></stop>`),this}};i(Ne,"SvgGradient"),Ne.g_id=1;var pt=Ne,ht=class ht extends pe{constructor(e="g"){super(e)}append(e){return this._dom.appendChild(e.getDom()),e}path(){let e=new ct;return this.append(e)}text(e,t,o){let n=new dt(e,t,o);return this.append(n)}ellipse(e,t,o,n=o){let r=new et("ellipse");return r.setAttr("cx",D(e)+""),r.setAttr("cy",D(t)+""),r.setAttr("rx",D(o)+""),r.setAttr("ry",D(n)+""),this.append(r)}rect(e,t,o,n){n<0&&(t=t+n,n=-n);let r=new et("rect");return r.setAttr("x",D(e)+""),r.setAttr("y",D(t)+""),r.setAttr("width",D(o)+""),r.setAttr("height",D(n)+""),this.append(r)}group(){let e=new ht;return this.append(e)}linear_gradient(e,t,o,n){let r=new pt(e,t,o,n);return this.append(r)}clear(){let e=this._dom;for(;e.firstChild;)e.removeChild(e.firstChild)}};i(ht,"SvgGroup");var tt=ht,Je=class Je extends tt{constructor(){super()}addClip(e,t,o,n){let r="c-"+Je.g_clip_id++,a=new tt("clipPath");return a.setAttr("id",r),a.rect(e,t,o,n),this.append(a),r}};i(Je,"SvgBuilder"),Je.g_clip_id=1;var Vt=Je,Yt=class Yt extends l{constructor(e){super({...e,tag:"svg",ns:ho}),this.setAttribute("xmlns",ho),e.viewbox&&this.setAttribute("viewbox",e.viewbox),e.svg&&this.dom.appendChild(e.svg.getDom())}};i(Yt,"SvgComponent");var Kt=Yt;var y=class extends l{};i(y,"Box"),y=h([d("x4")],y);var u=class extends y{};i(u,"HBox"),u=h([d("x4")],u);var _=class extends y{constructor(e){super(e)}};i(_,"VBox"),_=h([d("x4")],_);var K=class extends y{constructor(e){var t;super(e),this._items=(t=e.items)==null?void 0:t.map(o=>({...o,page:null})),e.default?this.select(e.default):this._items.length&&this.select(this._items[0].name)}select(e){let t=this.query(".selected");t&&t.setClass("selected",!1);let o=this._items.find(n=>n.name==e);o&&(o.page||(o.page=this._createPage(o),this.appendContent(o.page)),t=o.page,t&&t.setClass("selected",!0))}_createPage(e){let t;return e.content instanceof Function?(t=e.content(),e.content=t):t=e.content,t==null||t.setData("stackname",e.name),t}};i(K,"StackBox"),K=h([d("x4")],K);var he=class extends y{};i(he,"GridBox"),he=h([d("x4")],he);var uo='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M299.3 244.7c6.2 6.2 6.2 16.4 0 22.6l-192 192c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6L265.4 256 84.7 75.3c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0l192 192z"/></svg>';var me=class extends u{constructor(e){var o;super(e),this.mapPropEvents(e,"click");let t=[];(o=e.items)==null||o.map((n,r)=>{t.push(new v({label:n.label,icon:n.icon,click:i(()=>{this.fire("click",{context:n.name})},"click")})),r!=e.items.length-1&&t.push(new f({iconId:uo}))}),this.setContent(t)}};i(me,"Breadcrumbs"),me=h([d("x4")],me);var Zt=class Zt{constructor(){this.cache=new Map,this.waiters=new Map}async load(e){return this.cache.has(e)?Promise.resolve(this.cache.get(e)):new Promise((t,o)=>{this.waiters.has(e)?this.waiters.get(e).push(t):(this.waiters.set(e,[t]),this._load(e).then(n=>{console.timeEnd(e),this.cache.set(e,n),this.waiters.get(e).forEach(a=>a(n))}))})}async _load(e){console.time(e);let t=await fetch(e);if(t.ok)return t.text()}};i(Zt,"SvgLoader");var jt=Zt,mt=new jt,f=class extends l{constructor(e){super(e),this.setIcon(e.iconId)}setIcon(e){if(e){if(e.startsWith("var:"))do{let t=e.substring(4);e=document.documentElement.style.getPropertyValue(t)}while(e.startsWith("var:"));e.startsWith("data:image/svg+xml,<svg")?this.dom.insertAdjacentHTML("beforeend",e.substring(19)):e.endsWith(".svg")?mt.load(e).then(t=>{this.clearContent(),this.dom.insertAdjacentHTML("beforeend",t)}):this.setContent(new l({tag:"img",attrs:{src:e}}))}else this.clearContent(),this.addClass("empty")}};i(f,"Icon"),f=h([d("x4")],f);var v=class extends l{constructor(e){super({...e,tag:"button",content:null}),this.mapPropEvents(e,"click"),this.addDOMEvent("click",t=>this._on_click(t)),this.setContent([new f({id:"icon",iconId:this.props.icon}),new l({id:"label",content:this.props.label})])}_on_click(e){this.fire("click",{}),e.preventDefault(),e.stopPropagation()}setText(e){this.query("#label").setContent(e)}setIcon(e){this.query("#icon").setIcon(e)}};i(v,"Button"),v=h([d("x4")],v);var q=class extends y{constructor(e){super(e),e.align&&this.addClass("align-"+e.align),this.addClass(e.vertical?"x4vbox":"x4hbox"),e.items&&this.setButtons(e.items),this.mapPropEvents(e,"btnclick")}setButtons(e){this.clearContent();let t=[];e==null||e.forEach(o=>{if(o==="-")o=new ce;else if(M(o)){let n,r=o,[a,c]=r.split(".");switch(a){case"ok":n=b.global.ok;break;case"cancel":n=b.global.cancel;break;case"abort":n=b.global.abort;break;case"no":n=b.global.no;break;case"yes":n=b.global.yes;break;case"retry":n=b.global.retry;break}o=new v({cls:c,label:n,click:i(()=>{this.fire("btnclick",{button:r})},"click")})}t.push(o)}),super.setContent(t)}};i(q,"BtnGroup"),q=h([d("x4")],q);var Ue,x=class extends l{constructor(t){super({...t,content:null});Qe(this,Ue);this.setContent([new f({id:"icon",iconId:this.props.icon}),We(this,Ue,new l({tag:"span",id:"text"}))]);let o=this.props.text;this.setText(o),t.labelFor&&this.setAttribute("for",t.labelFor)}setText(t){T(this,Ue).setContent(t),T(this,Ue).setClass("empty",!t)}setIcon(t){this.query("#icon").setIcon(t)}};Ue=new WeakMap,i(x,"Label"),x=h([d("x4")],x);var C=class extends l{constructor(e,t){super({}),this._type=e,this.addClass(e),this.addDOMEvent("pointerdown",o=>{this.setCapture(o.pointerId),this._ref=t!=null?t:E(this.dom.parentElement),this._delta={x:0,y:0};let n=this._ref.getBoundingRect();this._type.includes("left")?this._delta.x=o.pageX-n.left:this._delta.x=o.pageX-(n.left+n.width),this._type.includes("top")?this._delta.y=o.pageY-n.top:this._delta.y=o.pageY-(n.top+n.height)}),this.addDOMEvent("pointerup",o=>{this.releaseCapture(o.pointerId),this._ref=null}),this.addDOMEvent("pointermove",o=>{this._onMouseMove(o)})}_onMouseMove(e){if(!this._ref)return;let t={x:e.pageX-this._delta.x,y:e.pageY-this._delta.y},o=this._ref.getBoundingRect(),n={},r=!0;this._type.includes("top")&&(n.top=t.y,n.height=o.top+o.height-t.y,r=!1),this._type.includes("bottom")&&(n.height=t.y-o.top,r=!1),this._type.includes("left")&&(n.left=t.x,n.width=o.left+o.width-t.x),this._type.includes("right")&&(n.width=t.x-o.left),this._ref.setStyle(n);let a=this._ref.getBoundingRect();this.fire("resize",{size:r?a.width:a.height}),e.preventDefault(),e.stopPropagation()}};i(C,"CSizer"),C=h([d("x4")],C);var Ve,xo=0,bo=[],O=[],$t=[],I=class extends l{constructor(t){super(t);this._isopen=!1;this._isshown=!1;this._dismiss=i(t=>{O.some(n=>n.dom.contains(t.target))||(t.preventDefault(),t.stopPropagation(),this.dismiss())},"_dismiss");this.props.sizable&&this._createSizers()}displayNear(t,o="top left",n="top left",r={x:0,y:0}){this.setStyle({left:"0px",top:"0px"}),this._show();let a=this.getBoundingRect(),c=t.left,p=t.top;n.indexOf("right")>=0?c=t.left+t.width:n.indexOf("center")>=0&&(c=t.left+t.width/2),n.indexOf("bottom")>=0?p=t.bottom:n.indexOf("middle")>=0&&(p=t.top+t.height/2);let m="l";o.indexOf("right")>=0?c-=a.width:o.indexOf("center")>=0&&(c-=a.width/2);let g="t";o.indexOf("bottom")>=0?p-=a.height:o.indexOf("middle")>=0&&(p-=a.height/2),r&&(c+=r.x,p+=r.y),c+=document.scrollingElement.scrollLeft,p+=document.scrollingElement.scrollTop,this.displayAt(c,p)}displayCenter(){this.displayNear(new N(window.innerWidth/2,window.innerHeight/2,0,0),"center middle")}displayAt(t,o){this.setStyle({left:t+"px",top:o+"px"}),this._show();let n=this.getBoundingRect(),r=window.innerWidth-16,a=window.innerHeight-16;n.right>r&&this.setStyleValue("left",r-n.width),n.bottom>a&&this.setStyleValue("top",a-n.height),this.props.movable&&(this.queryAll(".caption-element").forEach(p=>new ut(p,this)),this.hasClass("popup-caption")&&new ut(this,this)),this.fire("opened",{})}_show(){this.props.modal&&!this._isshown&&(this._showModalMask(),bo.push(this),xo++),this._isshown=!0,this.props.autoClose&&(O.length==0&&document.addEventListener("pointerdown",this._dismiss),O.push(this),this.setData("close",this.props.autoClose===!0?R():this.props.autoClose)),$t.push(this),document.body.appendChild(this.dom),this.show()}show(t=!0){this._isopen=t,super.show(t)}isOpen(){return this._isopen}close(){document.body.removeChild(this.dom);let t=$t.indexOf(this);if(console.assert(t>=0),$t.splice(t,1),this.props.autoClose){let o=O.indexOf(this);o>=0&&(O.splice(o,1),O.length==0&&document.removeEventListener("pointerdown",this._dismiss))}if(this.props.modal){let o=bo.pop();console.assert(o==this),this._updateModalMask()}this._isshown=!1,this.fire("closed",{})}dismiss(t=!1){if(O.length==0)return;let o=this.getData("close"),n=[],r=[],a=-1;t&&(a=O.indexOf(this)),O.forEach((p,m)=>{p.getData("close")==o&&m>a?n.push(p):r.push(p)});let c=n.reverse();O=r,O.length==0&&document.removeEventListener("pointerdown",this._dismiss),c.forEach(p=>p.close())}_showModalMask(){Ve||(Ve=new l({cls:"x4modal-mask",domEvents:{click:this._dismiss}})),Ve.show(!0),document.body.insertAdjacentElement("beforeend",Ve.dom)}_updateModalMask(){--xo==0?Ve.show(!1):this.dom.insertAdjacentElement("beforebegin",Ve.dom)}_createSizers(){this.appendContent([new C("top"),new C("bottom"),new C("left"),new C("right"),new C("top-left"),new C("bottom-left"),new C("top-right"),new C("bottom-right")])}};i(I,"Popup"),I=h([d("x4")],I);var Xt=class Xt{constructor(e,t){this.self=!!t,e.addDOMEvent("pointerdown",o=>{if(this.self&&o.target!=e.dom)return;e.setCapture(o.pointerId),this.ref=t!=null?t:E(e.dom.parentElement),this.delta={x:0,y:0};let n=this.ref.getBoundingRect();this.delta.x=o.pageX-n.left,this.delta.y=o.pageY-n.top}),e.addDOMEvent("pointerup",o=>{e.releaseCapture(o.pointerId),this.ref=null}),e.addDOMEvent("pointermove",o=>{this._onMouseMove(o)})}_onMouseMove(e){if(!this.ref)return;let t={x:e.pageX-this.delta.x,y:e.pageY-this.delta.y},o=this.ref.getBoundingRect(),n={};this.ref.setStyle({top:t.y+"",left:t.x+""}),e.preventDefault(),e.stopPropagation()}};i(Xt,"CMover");var ut=Xt;var go=400,ue=class extends l{constructor(){super({})}};i(ue,"CMenuSep"),ue=h([d("x4")],ue);var xt=new ie,Z=class extends l{constructor(e){super({disabled:e.disabled,cls:e.cls}),e.menu&&this.addClass("popup"),this.setContent([new f({id:"icon",iconId:e.icon}),new l({id:"text",content:e.text})]),e.menu?(this.menu=e.menu,this.addDOMEvent("mouseenter",()=>this.openSub(!0)),this.addDOMEvent("click",()=>this.openSub(!1)),this.addDOMEvent("mouseleave",()=>this.closeSub()),this.menu.on("opened",()=>this.addClass("opened")),this.menu.on("closed",()=>this.removeClass("opened"))):(this.addDOMEvent("mouseenter",()=>{xt.setTimeout("open",go,()=>{this.dismiss(!0)})}),this.addDOMEvent("click",()=>{this.dismiss(!1),e.click&&e.click(new Event("click"))}))}dismiss(e){let t=this.parentElement(H);t&&t.dismiss(e)}openSub(e){let t=i(()=>{this.dismiss(!0);let o=this.getBoundingRect();this.menu.displayAt(o.right-4,o.top)},"open");e?xt.setTimeout("open",go,t):(xt.clearTimeout("open"),t())}closeSub(){xt.clearTimeout("open")}};i(Z,"CMenuItem"),Z=h([d("x4")],Z);var H=class extends I{constructor(e){var o;super({...e,autoClose:"menu",modal:!1}),this.addClass("x4vbox");let t=(o=e.items)==null?void 0:o.map(n=>n==="-"?new ue:M(n)?new Z({text:n,click:null,cls:"title"}):n instanceof l?n:new Z(n));this.setContent(t)}};i(H,"Menu"),H=h([d("x4")],H);var fo='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M9.4 256l11.3-11.3 192-192L224 41.4 246.6 64 235.3 75.3 54.6 256 235.3 436.7 246.6 448 224 470.6l-11.3-11.3-192-192L9.4 256z"/></svg>';var vo='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M128 16l0-16L96 0l0 16 0 48L32 64 0 64 0 96l0 64 0 32L0 480l0 32 32 0 384 0 32 0 0-32 0-288 0-32 0-64 0-32-32 0-64 0 0-48 0-16L320 0l0 16 0 48L128 64l0-48zM32 192l384 0 0 288L32 480l0-288zm0-96l384 0 0 64L32 160l0-64zM331.3 283.3L342.6 272 320 249.4l-11.3 11.3L208 361.4l-52.7-52.7L144 297.4 121.4 320l11.3 11.3 64 64L208 406.6l11.3-11.3 112-112z"/></svg>';var _o='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M310.6 256l-11.3 11.3-192 192L96 470.6 73.4 448l11.3-11.3L265.4 256 84.7 75.3 73.4 64 96 41.4l11.3 11.3 192 192L310.6 256z"/></svg>';var xe=class extends _{constructor(e){super(e),this.mapPropEvents(e,"change"),this.m_date=e.date?se(e.date):new Date,this._update()}_update(){let e=se(this.m_date);e.setDate(1);let t=e.getDay();t==0&&(t=7),e.setDate(-t+1+1);let o=se(e),n=Y(this.m_date),r=Y(new Date),a=se(this.m_date);a.setDate(1),a.setMonth(a.getMonth()+1),a.setDate(0);let c=Y(a),p=[],m=new u({cls:"month-sel",content:[new x({cls:"month",text:U(this.m_date,"O"),dom_events:{click:i(()=>this._choose("month"),"click")}}),new x({cls:"year",text:U(this.m_date,"Y"),dom_events:{click:i(()=>this._choose("year"),"click")}}),new ce,new v({icon:fo,click:i(()=>this._next(!1),"click")}),new v({icon:vo,click:i(()=>this.setDate(new Date),"click"),tooltip:b.global.today}),new v({icon:_o,click:i(()=>this._next(!0),"click")})]});p.push(m);let g=[];g.push(new u({cls:"weeknum cell"}));for(let w=0;w<7;w++)g.push(new x({cls:"cell",text:b.global.day_short[(w+1)%7]}));p.push(new u({cls:"week header",content:g}));let P=this.m_date.getMonth(),A=!0;for(;Y(o)<=c;){let w=[new u({cls:"weeknum cell",content:new l({tag:"span",content:U(o,"w")})})];for(let Ke=0;Ke<7;Ke++){let oe="cell day";Y(o)==n&&(oe+=" selection"),Y(o)==r&&(oe+=" today"),o.getMonth()!=P&&(oe+=" out");let ne=i(nt=>new u({cls:oe,flex:1,content:new l({cls:"text",content:Ge(`<span>${U(nt,"d")}</span>`)}),dom_events:{click:i(()=>this.select(nt),"click")}}),"mkItem");w.push(ne(se(o))),o.setDate(o.getDate()+1),A=!1}p.push(new u({cls:"week",flex:1,content:w}))}this.setContent(p)}select(e){this.m_date=e,this.fire("change",{value:e}),this._update()}_next(e){this.m_date.setMonth(this.m_date.getMonth()+(e?1:-1)),this._update()}_choose(e){var r,a,c,p;let t=[];if(e=="month")for(let m=0;m<12;m++)t.push({text:b.global.month_long[m],click:i(()=>{this.m_date.setMonth(m),this._update()},"click")});else if(e=="year"){let m=(a=(r=this.props.minDate)==null?void 0:r.getFullYear())!=null?a:1900,g=(p=(c=this.props.maxDate)==null?void 0:c.getFullYear())!=null?p:2037;for(let P=g;P>=m;P--)t.push({text:""+P,click:i(()=>{this.m_date.setFullYear(P),this._update()},"click")})}let o=new H({items:t}),n=this.getBoundingRect();o.displayAt(n.left,n.top)}getDate(){return this.m_date}setDate(e){this.m_date=e,this._update()}};i(xe,"Calendar"),xe=h([d("x4")],xe);var k=class extends l{constructor(e){var t;switch(super({tag:"input",...e}),this.setAttribute("type",(t=e.type)!=null?t:"text"),this.setAttribute("name",e.name),e.type){case"checkbox":case"radio":{let o=this.dom;o.checked=e.checked,o.value=e.value+"";break}case"range":{this.setAttribute("min",e.min),this.setAttribute("max",e.max),this.setAttribute("step",e.step),this.setAttribute("value",e.value);break}case"number":{this.setAttribute("required",e.required),this.setAttribute("readonly",e.readonly),this.setAttribute("min",e.min),this.setAttribute("max",e.max),this.setAttribute("step",e.step),this.setAttribute("value",e.value+"");break}case"date":{this.setAttribute("required",e.required);let o=e.value;o instanceof Date||this.setAttribute("value",o);break}case"file":{let o;Array.isArray(e.accept)?o=e.accept.join(","):o=e.accept,this.setAttribute("accept",o);break}default:{this.setAttribute("required",e.required),this.setAttribute("readonly",e.readonly),e.value!==null&&e.value!==void 0&&this.setAttribute("value",e.value),e.pattern!==null&&e.pattern!==void 0&&this.setAttribute("pattern",e.pattern),e.placeholder!==null&&e.placeholder!==void 0&&this.setAttribute("placeholder",e.placeholder),e.spellcheck===!1&&this.setAttribute("spellcheck",!1);break}}}getValue(){return this.dom.value}setValue(e){this.dom.value=e+""}getNumValue(){return parseFloat(this.getValue())}setNumValue(e){this.setValue(e+"")}setReadOnly(e){let t=this.dom;t.readOnly=e}selectAll(){this.dom.select()}select(e,t=9999){this.dom.setSelectionRange(e,e+t)}getSelection(){let e=this.dom;return{start:e.selectionStart,length:e.selectionEnd-e.selectionStart}}queryInterface(e){return e=="form-element"?{getRawValue:i(()=>this.getValue(),"getRawValue"),setRawValue:i(o=>{this.setValue(o)},"setRawValue")}:super.queryInterface(e)}};i(k,"Input"),k=h([d("x4")],k);var wo='data:image/svg+xml,<svg viewBox="0 0 10 7" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">%0D%0A%09<path d="M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd">%0D%0A%09</path>%0D%0A</svg>';var be=class extends l{constructor(e){super(e);let t=R();this.mapPropEvents(e,"change"),this.setContent([new l({cls:"inner",content:[this._input=new k({type:"checkbox",id:t,checked:e.checked,dom_events:{change:i(()=>this._on_change(),"change")}})]}),new x({tag:"label",text:e.label,labelFor:t,id:void 0})]),mt.load(wo).then(o=>{this.query(".inner").dom.insertAdjacentHTML("beforeend",o)})}_on_change(){this.fire("change",{value:this.getCheck()})}getCheck(){return this._input.dom.checked}setCheck(e){let t=this._input.dom;t.checked=e}setLabel(e){this.query("label").setText(e)}toggle(){this.setCheck(!this.getCheck())}};i(be,"Checkbox"),be=h([d("x4")],be);var yo='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M479.4 240L384 240l-16 0 0 32 16 0 95.4 0C471.6 383 383 471.6 272 479.4l0-95.4 0-16-32 0 0 16 0 95.4C129 471.6 40.4 383 32.6 272l95.4 0 16 0 0-32-16 0-95.4 0C40.4 129 129 40.4 240 32.6l0 95.4 0 16 32 0 0-16 0-95.4C383 40.4 471.6 129 479.4 240zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"/></svg>';var $=class extends u{constructor(e){super(e);let t,o;this.setContent([t=new l({cls:"swatch"}),o=new k({type:"text",value:"",spellcheck:!1}),Ye("eyedropper")?new v({icon:yo,click:i(()=>{new window.EyeDropper().open().then(c=>{r=new L(c.sRGBHex),n(r)})},"click")}):null]),o.addDOMEvent("input",()=>{let a=o.getValue(),c=new L(a);c.isInvalid()||(r=c,n(r))});let n=i(a=>{t.setStyleValue("backgroundColor",a.toRgbString(!1)),o.setValue(a.toRgbString(!1))},"updateColor"),r;e.color instanceof L?r=e.color:r=new L(e.color),n(r)}};i($,"ColorInput"),$["$cls-ns"]="x4",$=h([d("x4")],$);var X=class extends y{constructor(t,o){super(t);this.mdown=!1;this.hsv={hue:1,saturation:1,value:1,alpha:1};this.setContent([this.color=new l({cls:"overlay"}),new l({cls:"overlay",style:{backgroundImage:"linear-gradient(90deg, rgb(255, 255, 255), transparent)"}}),new l({cls:"overlay",style:{backgroundImage:"linear-gradient(0deg, rgb(0, 0, 0), transparent)"}}),this.thumb=new l({cls:"thumb"})]),this.setDOMEvents({pointerdown:i(n=>this.mousedown(n),"pointerdown"),pointermove:i(n=>this.mousemove(n),"pointermove"),pointerup:i(n=>this.mouseup(n),"pointerup"),created:i(()=>this.updateThumbMarker(),"created")}),this.updateBaseColor(o)}mousedown(t){this.mdown=!0,this.irect=this.getBoundingRect(),this.setCapture(t.pointerId)}mousemove(t){if(this.mdown){let o=this.irect,r=S(t.clientX-o.left,0,o.width)/o.width,c=S(t.clientY-o.top,0,o.height)/o.height;this.hsv.saturation=r,this.hsv.value=1-c,this.updateThumbMarker(),this.fire("sat_change",{saturation:this.hsv.saturation,value:this.hsv.value})}}mouseup(t){this.mdown&&(this.releaseCapture(t.pointerId),this.mdown=!1)}updateThumbMarker(){let t=this.color.getBoundingRect();this.thumb.setStyle({left:this.hsv.saturation*t.width+"px",bottom:this.hsv.value*t.height+"px"})}updateBaseColor(t){let o=new L(0,0,0);o.setHsv(t.hue,1,1,1),this.color.setStyleValue("backgroundColor",o.toRgbString(!1))}move(t,o){switch(t){case"saturation":{this.hsv.saturation+=o,this.hsv.saturation<0?this.hsv.saturation=0:this.hsv.saturation>1&&(this.hsv.saturation=1),this.fire("sat_change",{saturation:this.hsv.saturation,value:this.hsv.value}),this.updateThumbMarker();break}case"value":{this.hsv.value+=o,this.hsv.value<0?this.hsv.value=0:this.hsv.value>1&&(this.hsv.value=1),this.fire("sat_change",{saturation:this.hsv.saturation,value:this.hsv.value}),this.updateThumbMarker();break}}}};i(X,"Saturation"),X=h([d("x4")],X);var ge=class extends y{constructor(t,o){super(t);this.hsv={hue:1,saturation:1,value:1,alpha:1};this.mdown=!1;this.setContent([this.thumb=new l({cls:"thumb",left:"50%"})]),this.setDOMEvents({pointerdown:i(n=>this.mousedown(n),"pointerdown"),pointermove:i(n=>this.mousemove(n),"pointermove"),pointerup:i(n=>this.mouseup(n),"pointerup")}),this.updateHue(o)}mousedown(t){this.mdown=!0,this.irect=this.getBoundingRect(),this.setCapture(t.pointerId)}mousemove(t){if(this.mdown){let o=this.irect,r=S(t.clientX-o.left,0,o.width)/o.width;this.hsv.hue=r,this.updateHue(this.hsv),this.fire("hue_change",{hue:this.hsv.hue})}}mouseup(t){this.mdown&&(this.releaseCapture(t.pointerId),this.mdown=!1)}updateHue(t){this.hsv.hue=t.hue,this.thumb.setStyleValue("left",t.hue*100+"%")}move(t){this.hsv.hue+=t,this.hsv.hue<0?this.hsv.hue=0:this.hsv.hue>1&&(this.hsv.hue=1),this.fire("hue_change",{hue:this.hsv.hue}),this.updateHue(this.hsv)}};i(ge,"HueSlider"),ge=h([d("x4")],ge);var fe=class extends y{constructor(t,o){super(t);this.hsv={hue:1,saturation:1,value:1,alpha:1};this.mdown=!1;this.setContent([new l({cls:"overlay checkers"}),this.color=new l({cls:"overlay color"}),this.thumb=new l({cls:"thumb",left:"50%"})]),this.setDOMEvents({pointerdown:i(n=>this._on_mousedown(n),"pointerdown"),pointermove:i(n=>this._on_mousemove(n),"pointermove"),pointerup:i(n=>this._on_mouseup(n),"pointerup")}),this.updateAlpha(),this.updateBaseColor(o)}_on_mousedown(t){this.mdown=!0,this.irect=this.getBoundingRect(),this.setCapture(t.pointerId)}_on_mousemove(t){if(this.mdown){let o=this.irect,r=S(t.clientX-o.left,0,o.width)/o.width;this.hsv.alpha=r,this.updateAlpha(),this.fire("alpha_change",{alpha:this.hsv.alpha})}}_on_mouseup(t){this.mdown&&(this.releaseCapture(t.pointerId),this.mdown=!1)}updateAlpha(){this.thumb.setStyleValue("left",this.hsv.alpha*100+"%")}updateBaseColor(t){let o=new L(0,0,0);o.setHsv(t.hue,t.saturation,t.value,1),this.color.setStyleValue("backgroundImage",`linear-gradient(90deg, transparent, ${o.toRgbString(!1)})`)}setColor(t){this.hsv=t,this.updateBaseColor(t),this.updateAlpha()}move(t){this.hsv.alpha+=t,this.hsv.alpha<0?this.hsv.alpha=0:this.hsv.alpha>1&&(this.hsv.alpha=1),this.fire("alpha_change",{alpha:this.hsv.alpha}),this.updateAlpha()}};i(fe,"AlphaSlider"),fe=h([d("x4")],fe);var ve=class extends _{constructor(e){super(e),e.color instanceof L?this._base=e.color:this._base=new L(e.color);let t=this._base.toHsv();this.setAttribute("tabindex",0),this.setContent([this._sat=new X({},t),new u({cls:"body",content:[new _({cls:"x4flex",content:[this._hue=new ge({},t),this._alpha=new fe({},t)]}),new y({cls:"swatch",content:[new l({cls:"overlay checkers"}),this._swatch=new l({cls:"overlay"})]})]})]),this._sat.on("sat_change",n=>{t.saturation=n.saturation,t.value=n.value,o(),this._alpha.updateBaseColor(t)}),this._hue.on("hue_change",n=>{t.hue=n.hue,this._sat.updateBaseColor(t),this._alpha.updateBaseColor(t),o()}),this._alpha.on("alpha_change",n=>{t.alpha=n.alpha,o()});let o=i(()=>{this._base.setHsv(t.hue,t.saturation,t.value,t.alpha),this._swatch.setStyleValue("backgroundColor",this._base.toRgbString()),this._swatch.setAttribute("tooltip",this._base.toRgbString()),this.fire("change",{color:this._base})},"updateColor");Ye("eyedropper")&&this._swatch.addDOMEvent("click",n=>{new window.EyeDropper().open().then(a=>{t=new L(a.sRGBHex).toHsv(),this._alpha.setColor(t),this._sat.updateBaseColor(t),this._hue.updateHue(t),o()})}),this.addDOMEvent("keydown",n=>this._onkey(n)),o()}_onkey(e){switch(e.key){case"ArrowLeft":{e.ctrlKey?this._hue.move(-.01):this._sat.move("saturation",-.01);break}case"ArrowRight":{e.ctrlKey?this._hue.move(.01):this._sat.move("saturation",.01);break}case"ArrowUp":{e.ctrlKey?this._alpha.move(.01):this._sat.move("value",.01);break}case"ArrowDown":{e.ctrlKey?this._alpha.move(-.01):this._sat.move("value",-.01);break}}}};i(ve,"ColorPicker"),ve=h([d("x4")],ve);var J=class extends l{constructor(e){super(e)}};i(J,"Viewport"),J=h([d("x4")],J);var Q=class extends l{constructor(e){super(e),this.setContent(new J({}))}getViewport(){return this.firstChild()}};i(Q,"ScrollView"),Q=h([d("x4")],Q);var Jt=(n=>(n[n.first=0]="first",n[n.prev=1]="prev",n[n.next=2]="next",n[n.last=3]="last",n))(Jt||{}),W=class extends l{constructor(t){super({...t});this.preventFocus=!1;this.setAttribute("tabindex",0);let o=new Q({cls:"body"});this._view=o.getViewport(),this.setContent([o]),this.setDOMEvents({click:i(n=>this._on_click(n),"click"),keydown:i(n=>this._on_key(n),"keydown"),dblclick:i(n=>this._on_click(n),"dblclick"),contextmenu:i(n=>this._on_ctx_menu(n),"contextmenu")}),t.items&&this.setItems(t.items)}_on_key(t){if(!this.isDisabled()){switch(t.key){case"ArrowDown":{this.navigate(2);break}case"ArrowUp":{this.navigate(1);break}case"Home":{this.navigate(0);break}case"End":{this.navigate(3);break}default:return}t.preventDefault(),t.stopPropagation()}}navigate(t){this._selitem||(t==2?t=0:t=3);let o=i((n,r)=>{for(;n&&!n.isVisible();)n=r?n.nextElement():n.prevElement();return n},"next_visible");if(t==0||t==3){let n=t==0?this._view.firstChild():this._view.lastChild();if(n=o(n,t==0),n){let r=n.getData("id");return this._selectItem(r,n),!0}}else{let n=t==2?this._selitem.nextElement():this._selitem.prevElement();if(n=o(n,t==2),n){let r=n.getData("id");return this._selectItem(r,n),!0}}return!1}_on_click(t){t.stopImmediatePropagation(),t.preventDefault();let o=t.target;for(;o&&o!=this.dom;){let n=E(o);if(n&&n.hasClass("x4item")){let r=n.getData("id"),a={context:r};t.type=="click"?this.fire("click",a):this.fire("dblClick",a),a.defaultPrevented||this._selectItem(r,n);return}o=o.parentElement}this.clearSelection()}_on_ctx_menu(t){t.preventDefault();let o=t.target;for(;o&&o!=this.dom;){let n=E(o);if(n&&n.hasClass("x4item")){let r=n.getData("id");this._selectItem(r,n),this.fire("contextMenu",{uievent:t,context:r});return}o=o.parentElement}this.fire("contextMenu",{uievent:t,context:null})}_selectItem(t,o){this._selitem&&(this._selitem.removeClass("selected"),this._selitem=void 0),this._selitem=o,this._selection=t,o&&(o.addClass("selected"),o.scrollIntoView({behavior:"smooth",block:"nearest"}));let n=this._findItem(t);this.fire("selectionChange",{selection:n})}_findItem(t){return this._items.find(o=>o.id==t)}_findItemIndex(t){return this._items.findIndex(o=>o.id==t)}clearSelection(){this._selitem&&(this._selitem.removeClass("selected"),this._selitem=void 0),this._selection=void 0,this.fire("selectionChange",{selection:void 0})}setItems(t){if(this.clearSelection(),this._view.clearContent(),this._items=t,t){let o=t.map(n=>this.renderItem(n));this._view.setContent(o)}}renderItem(t){var r;let n=((r=this.props.renderer)!=null?r:this.defaultRenderer)(t);return n.addClass("x4item"),n.setData("id",t.id+""),n}defaultRenderer(t){return new u({cls:t.cls,content:new x({icon:t.iconId,text:t.text})})}filter(t){let o=this._view.enumChildComponents(!1);if(!t)o.forEach(n=>n.show(!0));else{let n=this._items.filter(r=>r.text.includes(t)).map(r=>r.id+"");o.forEach(r=>{r.show(n.includes(r.getData("id")))})}}appendItem(t,o=!1,n=!0){n&&this.clearSelection();let r=this.renderItem(t);o?(this._items.unshift(t),this._view.prependContent(r)):(this._items.push(t),this._view.appendContent(r)),n&&this._selectItem(t.id,r)}updateItem(t,o){var c;let n=this._findItemIndex(t);if(n<0)return;let r=!1;this._selection&&this._selection===t&&(r=!0),this._items[n]=o;let a=(c=this.query(`[data-id="${o.id}"]`))==null?void 0:c.dom;if(a){let p=this.renderItem(o);this._view.dom.replaceChild(p.dom,a),r&&this._selectItem(o.id,p)}}};i(W,"Listbox"),W=h([d("x4")],W);var Eo='data:image/svg+xml,<svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">%0D%0A%09<path d="M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd">%0D%0A%09</path>%0D%0A</svg>';var _e=class extends I{constructor(e,t){super(e),this._list=new W({items:e.items}),this.setContent(this._list),this.addDOMEvent("mousedown",o=>{console.log("trap"),o.stopImmediatePropagation(),o.stopPropagation(),o.preventDefault()},!0),this._list.on("selectionChange",o=>{this.fire("selectionChange",o)})}getList(){return this._list}};i(_e,"Dropdown"),_e=h([d("x4")],_e);var we=class extends l{constructor(t){super(t);this._prevent_close=!1;let o=R();this.setContent([new u({id:"label",content:new x({tag:"label",text:t.label,labelFor:o,width:t.labelWidth})}),this._edit=new u({id:"edit",content:[this._input=new k({type:"text",value:"",readonly:t.readonly}),this._button=new v({icon:Eo})]})]),this._dropdown=new _e({items:t.items}),this._dropdown.on("selectionChange",n=>{let r=n.selection;this._input.setValue(r?r.text:""),this._prevent_close||this._dropdown.show(!1)}),this._button.addDOMEvent("click",()=>this._on_click()),this._input.addDOMEvent("input",()=>this._on_input()),this._input.addDOMEvent("keydown",n=>this._on_key(n)),this.setDOMEvents({focusout:i(()=>this._on_focusout(),"focusout"),click:i(()=>this._on_click(),"click")})}_on_key(t){switch(t.key){case"Enter":case"Escape":{this._dropdown.show(!1);break}case"ArrowUp":this._prevent_close=!0,this._dropdown.isOpen()?this._dropdown.getList().navigate(1):this.showDropDown(),this._prevent_close=!1;break;case"ArrowDown":this._prevent_close=!0,this._dropdown.isOpen()?this._dropdown.getList().navigate(2):this.showDropDown(),this._prevent_close=!1;break;default:return}t.preventDefault(),t.stopPropagation()}_on_input(){this._dropdown.isOpen()||this.showDropDown(),this._dropdown.getList().filter(this._input.getValue())}_on_focusout(){this._dropdown.show(!1)}_on_click(){this.showDropDown()}showDropDown(){if(this.isDisabled())return;let t=this._edit.getBoundingRect();this._dropdown.setStyleValue("width",t.width+"px"),this._dropdown.displayNear(t,"top left","bottom left",{x:0,y:6})}};i(we,"Combobox"),we=h([d("x4")],we);var z=class extends y{setValues(e){let t=this.queryAll("input[name]");console.log(t)}getValues(){return{}}};i(z,"Form"),z=h([d("x4")],z);var ko='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 233.4L59.5 100.9 36.9 123.5 169.4 256 36.9 388.5l22.6 22.6L192 278.6 324.5 411.1l22.6-22.6L214.6 256 347.1 123.5l-22.6-22.6L192 233.4z"/></svg>';var G=class extends I{constructor(e){super({modal:!0,...e}),this.mapPropEvents(e,"btnclick"),this.appendContent([new u({cls:"caption",content:[new x({id:"title",cls:"caption-element",icon:e.icon,text:e.title}),e.closable?new v({id:"closebox",icon:ko,click:i(()=>{this.close()},"click")}):null]}),this.form=e.form?e.form:new z({}),new q({id:"btnbar",reverse:!0,items:e.buttons,btnclick:i(t=>{this.fire("btnclick",t)},"btnclick")})])}display(){super.displayCenter()}close(){this.fire("close",{}),super.close()}setContent(e){this.dom.replaceChild(this.form.dom,e.dom),this.form=e}getForm(){return this.form}getValues(){return this.form.getValues()}};i(G,"Dialog"),G=h([d("x4")],G);var ye=class extends u{constructor(e){var t;super(e),this._els=(t=e.items)==null?void 0:t.map(o=>{let n=new x({cls:"cell",text:o.title,icon:o.iconId}),r=new C("right");return o.width>0?(n.setStyleValue("width",o.width+"px"),n.setInternalData("width",o.width)):o.width<0?n.setInternalData("flex",-o.width):n.setInternalData("width",0),r.addDOMEvent("dblclick",a=>{n.setInternalData("flex",1),this._calc_sizes()}),r.on("resize",a=>{n.setInternalData("flex",0),n.setInternalData("width",a.size),this._calc_sizes()}),n.appendContent(r),n.setInternalData("data",o),n}),this.addDOMEvent("resized",()=>this._on_resize()),this.addDOMEvent("created",()=>this._calc_sizes()),this._vwp=new u({content:this._els}),this.setContent(this._vwp)}_calc_sizes(){let e=0,t=0;this._els.forEach(c=>{let p=c.getInternalData("flex");if(p)e+=p;else{let m=c.getInternalData("width");if(m==0){let g=c.getBoundingRect();m=Math.ceil(g.width)+2,c.setInternalData("width",m)}t+=m}});let n=this.getBoundingRect().width-t,r=Math.ceil(n/e);console.log("filled",t),console.log("count",e),console.log("rest",n),console.log("unit",r);let a=0;this._els.forEach(c=>{let p=0,m=c.getInternalData("flex");m?(p=Math.min(r*m,n),n-=p):p=c.getInternalData("width"),c.setWidth(p),a+=p}),this._vwp.setWidth(a)}_on_resize(){this._calc_sizes()}};i(ye,"Header"),ye=h([d("x4")],ye);var Ee=class extends l{constructor(e){var t;super(e),this._img=new l({tag:"img",attrs:{loading:e.lazy,alt:e.alt,draggable:(t=e.draggable)!=null?t:!1},style:{width:"100%",height:"100%",objectFit:e.fit,objectPosition:e.position}}),this.setContent(this._img),this.setImage(e.src)}setImage(e){this._img.setAttribute("src",e)}};i(Ee,"Image"),Ee=h([d("x4")],Ee);var ke=class extends l{constructor(e){super({tag:"a",...e}),this.setAttribute("href",e.href),this.mapPropEvents(e,"click"),this.setContent(new x({text:e.text,icon:e.icon})),this.addDOMEvent("click",t=>this._on_click(t))}setText(e){this.setContent(e)}_on_click(e){let t={context:this.props.href};this.fire("click",t),t.preventDefault&&(e.preventDefault(),e.stopPropagation())}};i(ke,"Link"),ke=h([d("x4")],ke);var Co='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>';var ee=class extends G{constructor(e){super(e)}setText(e){this.m_label.setText(e)}static show(e){let t=new ee({modal:!0,title:b.global.error,movable:!0,form:new z({content:[new u({content:[new f({iconId:Co}),new x({text:e})]})]}),buttons:["ok.outline","cancel.outline"]});return t.on("btnclick",o=>{wt(()=>t.close())}),t.display(),t}};i(ee,"MessageBox"),ee=h([d("x4")],ee);var Ao='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>';var Io='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>';var Po='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M207.4 20.4c2.4 8.5-2.6 17.3-11.2 19.7C101.5 66.2 32 153 32 256c0 123.7 100.3 224 224 224s224-100.3 224-224c0-103-69.5-189.8-164.3-215.9c-8.5-2.4-13.5-11.2-11.2-19.7s11.2-13.5 19.7-11.2C432.5 39.1 512 138.2 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 138.2 79.5 39.1 187.7 9.2c8.5-2.4 17.3 2.6 19.7 11.2z"/></svg>';var Mo='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M192 233.4L59.5 100.9 36.9 123.5 169.4 256 36.9 388.5l22.6 22.6L192 278.6 324.5 411.1l22.6-22.6L214.6 256 347.1 123.5l-22.6-22.6L192 233.4z"/></svg>';var Ce=class extends I{constructor(e){super({});let t=e.iconId;t||(e.loading?(t=Po,this.addClass("")):e.mode=="danger"?t=Io:t=Ao),this.addClass(e.mode);let o=new f({iconId:t});e.loading&&(o.addClass("rotate"),this.props.modal=!0),this.setContent(new u({content:[o,new _({cls:"body",content:[new x({cls:"title",text:e.title}),new x({cls:"text",text:e.text})]}),new v({cls:"outline",icon:Mo,click:i(()=>{this.close()},"click")})]}))}close(){this.clearTimeout("close"),super.close()}display(e=0){let t=new N(0,0,window.innerWidth,window.innerHeight);this.displayNear(t,"bottom right","bottom right",{x:-20,y:-10}),e&&this.setTimeout("close",e*1e3,()=>{this.close()})}};i(Ce,"Notification"),Ce=h([d("x4")],Ce);var Ae=class extends _{constructor(e){var o;super({...e,content:void 0});let t=(o=e.bodyModel)!=null?o:_;super.setContent([this._title=new x({tag:"legend",text:e.title,icon:e.icon}),this._body=new t({cls:"body",content:e.content})])}setContent(e){this._body.setContent(e)}setTitle(e){this._title.setContent(e)}};i(Ae,"Panel"),Ae=h([d("x4")],Ae);var Ie=class extends l{constructor(e){super(e),this.setContent(this._bar=new l({cls:"bar"})),this.setValue(e.value)}setValue(e){let t=e/(this.props.max-this.props.min)*100;this._bar.setStyleValue("width",t+"%")}};i(Ie,"Progress"),Ie=h([d("x4")],Ie);var Do='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor"><!--!Font Awesome Pro 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M288.1 0l86.5 164 182.7 31.6L428 328.5 454.4 512 288.1 430.2 121.7 512l26.4-183.5L18.9 195.6 201.5 164 288.1 0z"/></svg>';var Pe=class extends u{constructor(e){var t;super(e),e.steps=(t=e.steps)!=null?t:5,this._update()}_update(){var n,r;let e=this.props,t=(n=e.icon)!=null?n:Do,o=(r=e.value)!=null?r:0;this.m_input=new k({type:"text",hidden:!0,name:e.name,value:""+o}),this.addDOMEvent("click",a=>this._on_click(a)),this.m_els=[];for(let a=0;a<e.steps;a++){let c="item";a+1<=o&&(c+=" checked");let p=new f({cls:c,iconId:t});p.setInternalData("value",a),this.m_els.push(p)}this.m_els.push(this.m_input),this.setContent(this.m_els)}getValue(){var e;return(e=this.props.value)!=null?e:0}setValue(e){this.props.value=e;for(let t=0;t<this.props.steps;t++)this.m_els[t].setClass("checked",this.m_els[t].getInternalData("value")<=e);this.m_input.setValue(""+this.props.value)}setSteps(e){this.props.steps=e,this._update()}setShape(e){this.removeClass(this.props.icon),this.props.icon=e}_on_click(e){let t=E(e.target);t=t.parentElement(f),t&&this.setValue(t.getInternalData("value")),this.fire("change",{value:this.props.value})}};i(Pe,"Rating"),Pe=h([d("x4")],Pe);var Me=class extends l{constructor(t){super(t);this._mdown=!1;this._irect=null;this._thumb=null;this._bar=null;this._range=null;this.setContent([new u({cls:"track",content:[this._bar=new l({cls:"bar"}),this._thumb=new l({cls:"thumb"})]}),this._range=new k({type:"range",hidden:!0,value:t.value,min:t.min,max:t.max,step:t.step})]),this.setAttribute("tabindex",0),this.setDOMEvents({pointerdown:i(o=>this._on_mousedown(o),"pointerdown"),pointermove:i(o=>this._on_mousemove(o),"pointermove"),pointerup:i(o=>this._on_mouseup(o),"pointerup"),keydown:i(o=>this._on_key(o),"keydown")}),this._range.addDOMEvent("change",o=>{})}_on_mousedown(t){t.stopPropagation(),t.preventDefault(),this.focus(),this._mdown=!0,this._irect=this.getBoundingRect(),this.setCapture(t.pointerId)}_on_mousemove(t){if(this._mdown){let o=t.pageX-this._irect.left;o<0?o=0:o>this._irect.width&&(o=this._irect.width);let n=o/this._irect.width*100;this._range.setNumValue(n),this._update()}}_update(){let t=this._range.getNumValue(),o=t/(this.props.max-this.props.min)*100;this._thumb.setStyleValue("left",o+"%"),this._bar.setStyleValue("width",o+"%"),this.fire("change",{value:t})}_on_mouseup(t){this._mdown&&(this.releaseCapture(t.pointerId),this._mdown=!1)}_on_key(t){var r;console.log(t.key);let o=(r=this.props.step)!=null?r:1,n=0;switch(t.key){case"ArrowRight":case"ArrowUp":n=o;break;case"ArrowLeft":case"ArrowDown":n=-o;break}n&&(t.ctrlKey&&(n*=10),this._range.setNumValue(this._range.getNumValue()+n),this._update())}};i(Me,"Slider"),Me=h([d("x4")],Me);var De=class extends u{constructor(e){super(e);let t=R();this.setContent([new l({cls:"switch",content:[new k({type:"checkbox",id:t,checked:e.checked}),new l({cls:"track"}),new l({cls:"thumb"})]}),new x({tag:"label",text:e.label,labelFor:t})])}};i(De,"Switch"),De=h([d("x4")],De);var Te=class extends v{constructor(e,t){super(e),this.addClass("outline"),this.setIcon(t.icon),this.setText(t.title),this.setData("tabname",t.name)}};i(Te,"CTab"),Te=h([d("x4")],Te);var Le=class extends u{constructor(e,t){super(e);let o=t.map(n=>new Te({click:i(r=>this._on_click(r),"click")},n));this.mapPropEvents(e,"click"),this.setContent(o)}_on_click(e){let t=e.source.getData("tabname");this.fire("click",{name:t})}select(e){let t=this.query(`[data-tabname="${e}"]`);this._selitem&&this._selitem.setClass("selected",!1),this._selitem=t,this._selection=e,this._selitem&&this._selitem.setClass("selected",!0)}};i(Le,"CTabList"),Le=h([d("x4")],Le);var Se=class extends _{constructor(e){var o;super(e);let t=(o=e.items)==null?void 0:o.map(n=>({name:n.name,content:n.tab}));this.setContent([this._list=new Le({click:i(n=>this._onclick(n),"click")},e.items),this._stack=new K({cls:"body x4flex",default:e.default,items:t})]),e.default&&this.selectTab(e.default)}selectTab(e){this._list.select(e),this._stack.select(e)}_onclick(e){this.selectTab(e.name)}};i(Se,"Tabs"),Se=h([d("x4")],Se);var Re=class extends _{constructor(e){super(e),this.setContent([new x({text:e.label}),this._input=new l({tag:"textarea"})]),this._input.setAttribute("name",e.name),this._input.setAttribute("value",e.value+""),e.resize||this._input.setAttribute("resize",!1)}};i(Re,"TextArea"),Re=h([d("x4")],Re);var Oe=class extends u{constructor(e){var o,n;super(e),e.inputId||(e.inputId=R()),e.required&&this.setAttribute("required",!0);let t=(o=e.inputGadgets)!=null?o:[];this.setContent([new u({id:"label",width:e.labelWidth,content:[new x({tag:"label",text:e.label,labelFor:e.inputId})]}),new u({id:"edit",content:[new k({type:(n=e.type)!=null?n:"text",readonly:e.readonly,value:e.value,name:e.name,id:e.inputId,required:e.required,disabled:e.disabled,placeholder:e.placeholder}),...t]})])}};i(Oe,"TextEdit"),Oe=h([d("x4")],Oe);var To='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"  fill="currentColor"> <!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM192 352v32h16 96 16V352H304 272V240 224H256 216 200v32h16 24v96H208 192zm88-168V136H232v48h48z"/></svg>';var bt=null,ot=null,Lo=new ie;function On(){document.addEventListener("mouseenter",s=>{if(s.target===document)return;let e=St(s.target),t=e.getAttribute("tooltip");if(t){bt=s.target;let o=e.getBoundingRect();zn(t,o,{x:s.pageX,y:s.pageY})}},!0),document.addEventListener("mouseleave",s=>{bt&&s.target==bt&&(bt=null,Bn())},!0)}i(On,"initTooltips");function zn(s,e,t){ot||(ot=new ze({})),Lo.setTimeout(null,300,()=>{ot.setText(Ge(s)),ot.displayAt(t.x,t.y)})}i(zn,"showTT");function Bn(){ot.show(!1),Lo.clearTimeout(null)}i(Bn,"closeTT");var ze=class extends I{constructor(e){super(e),this.setContent(new u({content:[new f({iconId:To}),new l({id:"text"})]}))}setText(e){this.query("#text").setContent(e)}};i(ze,"Tooltip"),ze=h([d("x4")],ze);var So='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M267.3 395.3c-6.2 6.2-16.4 6.2-22.6 0l-192-192c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L256 361.4 436.7 180.7c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6l-192 192z"/></svg>';var Ro=(m=>(m[m.first=0]="first",m[m.prev=1]="prev",m[m.next=2]="next",m[m.last=3]="last",m[m.parent=4]="parent",m[m.child=5]="child",m[m.expand=6]="expand",m[m.collapse=7]="collapse",m[m.toggle=8]="toggle",m))(Ro||{}),te=class extends y{constructor(e,t){super({...e}),this._item=t,t?(this._label=new u({cls:"label item",content:[this._icon=new f({iconId:t.children?So:t.iconId}),new x({tag:"span",cls:"",text:t.text})]}),this._label.setData("id",t.id+""),t.children&&(this._childs=new _({cls:"body"}),t.open===void 0&&(t.open=!1),this.addClass("folder"),this.setClass("open",t.open),this.setItems(t.children),this._icon.addDOMEvent("click",o=>this.toggle(o)))):this._childs=new _({cls:"body"}),this.setContent([this._label,this._childs])}toggle(e){let t=this.hasClass("open");this.open(!t),e&&e.stopPropagation()}open(e=!0){this.setClass("open",e),this._item.open=e}setItems(e){if(e){let t=e.map(o=>new te({},o));this._childs.setContent(t)}else this._childs.clearContent()}};i(te,"CTreeViewItem"),te=h([d("x4")],te);var Be=class extends l{constructor(e){super(e),e.items&&this.setItems(e.items),this.setAttribute("tabindex",0),this.setDOMEvents({click:i(t=>this._onclick(t),"click"),keydown:i(t=>this._onkey(t),"keydown")})}setItems(e){this._items=e;let t=new te({cls:"root"},null);t.setItems(e),this.setContent(t)}_onclick(e){let t=e.target;for(;t&&t!=this.dom;){let o=E(t);if(o&&o.hasClass("item")){let n=o.getData("id");this._selectItem(n,o);return}t=t.parentElement}this.clearSelection()}_onkey(e){switch(e.key){case"ArrowDown":{this.navigate(2);break}case"ArrowUp":{this.navigate(1);break}case"Home":{this.navigate(0);break}case"End":{this.navigate(3);break}case"ArrowRight":{this.navigate(5);break}case"+":{this.navigate(6);break}case"ArrowLeft":{this.navigate(4);break}case"-":{this.navigate(7);break}case" ":{this.navigate(8);break}default:console.log(e.key);return}e.preventDefault(),e.stopPropagation()}navigate(e){var n;if(!this._items||this._items.length==0)return;if(!this._selitem)if(e==2||e==4)e=0;else if(e==1)e=3;else return;let t=(n=this._selitem)==null?void 0:n.parentElement(),o=t==null?void 0:t.hasClass("folder");if(t&&e==4&&o&&t.hasClass("open")?e=7:e==5&&(o?t.hasClass("open")?e=2:e=6:e=2),e==6||e==7||e==8){if(o)return e==8?(t.toggle(),!0):(t.open(e==6),!0)}else{let r=this._flattenOpenItems(),a=r.findIndex(p=>this._selection==p.id),c;if(e==0)c=r[0].id;else if(e==3)c=r[r.length-1].id;else if(a>=0){if(e==1)a>0&&(c=r[a-1].id);else if(e==2)a<r.length-1&&(c=r[a+1].id);else if(e==4){let p=r[a].level;for(;a>0;)if(a--,r[a].level<p){c=r[a].id;break}}}if(c){let p=this.query(`[data-id="${c}"]`);return this._selectItem(c,p),!0}}return!1}_flattenOpenItems(){let e=[],t=i((o,n)=>{e.push({id:o.id+"",level:n}),o.children&&o.open&&o.children.forEach(r=>t(r,n+1))},"build");return this._items.forEach(o=>t(o,0)),e}_flattenItems(){let e=[],t=i(o=>{e.push(o),o.children&&o.children.forEach(n=>t(n))},"build");return this._items.forEach(o=>t(o)),e}_selectItem(e,t){this._selitem&&(this._selitem.removeClass("selected"),this._selitem=void 0),this._selitem=t,this._selection=e,t&&(t.addClass("selected"),t.scrollIntoView({behavior:"smooth",block:"nearest"}));let o=this._findItem(e);this.fire("change",{selection:o})}_findItem(e){return this._flattenItems().find(o=>o.id==e)}clearSelection(){this._selitem&&(this._selitem.removeClass("selected"),this._selitem=void 0),this._selection=void 0,this.fire("change",{selection:void 0})}};i(Be,"Treeview"),Be=h([d("x4")],Be);
